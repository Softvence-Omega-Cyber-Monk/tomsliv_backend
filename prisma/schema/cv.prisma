model CV {
  id String @id @default(uuid())

  firstName String
  lastName  String

  email    String
  phone    String
  location String
  summary  String

  jobTitle     String
  jobType      JobType
  availability DateTime?

  hasDrivingLicense  Boolean @default(false)
  eligibleToWorkInNZ Boolean @default(false)

  workPermitType WorkPermitType @default(OTHER)

  customCVId String?
  customCV   FileInstance? @relation(fields: [customCVId], references: [id], onDelete: SetNull)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  experiences Experience[]
  educations  Education[]

  @@map("cvs")
}

enum WorkPermitType {
  CITIZENSHIP
  RESIDENT_VISA
  WORK_VISA
  STUDENT_VISA
  OTHER
}

model Experience {
  id String @id @default(uuid())

  cv   CV     @relation(fields: [cvId], references: [id], onDelete: Cascade)
  cvId String

  jobTitle String
  jobType  JobType
  company  String

  startDate DateTime
  endDate   DateTime?
  isOngoing Boolean   @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@map("experiences")
}

model Education {
  id String @id @default(uuid())

  cv   CV     @relation(fields: [cvId], references: [id], onDelete: Cascade)
  cvId String

  degree      String
  institution String

  startDate DateTime
  endDate   DateTime?
  isOngoing Boolean   @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@map("educations")
}
